<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Container.html">Container</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Container.html#.open">open</a></li><li data-type='method' style='display: none;'><a href="Container.html#close">close</a></li><li data-type='method' style='display: none;'><a href="Container.html#get">get</a></li><li data-type='method' style='display: none;'><a href="Container.html#set">set</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="Service.html">Service</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Service.html#.open">open</a></li><li data-type='method' style='display: none;'><a href="Service.html#close">close</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#ServiceIdentity">ServiceIdentity</a></li><li><a href="global.html#ServiceMap">ServiceMap</a></li></ul>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>trop_ioc</h1>
<ul>
<li>Best effort for retrive logs from ETH-like JSON RPC endpoints.</li>
<li>Source code at <a href="https://github.com/kevin-leptons/trop_ioc">github.com</a>.</li>
</ul>
<h1>Getting Started</h1>
<pre class="prettyprint source lang-js"><code>const {Container} = require('@trop/ioc')

class Config {
    /**
     * @type {string}
     */
    static get identity() {
        return 'config'
    }

    /**
     * @type {Array&lt;string>}
     */
    static get dependencies() {
        return []
    }

    /**
     *
     * @param {number} balanceA
     * @param {number} balanceB
     */
    constructor(balanceA, balanceB) {
        this._balanceA = balanceA
        this._balanceB = balanceB
    }

    /**
     *
     * @param {number} balanceA
     * @param {number} balanceB
     */
    static open(balanceA = 1, balanceB = 2) {
        return new Config(balanceA, balanceB)
    }

    close() {}

    /**
     * @type {number}
     */
    get balanceA() {
        return this._balanceA
    }

    /**
     * @type {number}
     */
    get balanceB() {
        return this._balanceB
    }
}

class ServiceA {
    static get identity() {
        return 'service.a'
    }

    static get dependencies() {
        return ['config']
    }

    /**
     *
     * @param {number} balance
     */

    constructor(balance) {
        this._balance = balance
    }

    /**
     * @param {Config} config
     * @return {ServiceA}
     */
    static async open(config) {
        return new ServiceA(config.balanceA)
    }

    async close() {
    }

    /**
     * @type {number}
     */
    get balance() {
        return this._balance
    }
}

class ServiceB {
    static get identity() {
        return 'service.b'
    }

    static get dependencies() {
        return ['config', 'service.a']
    }

    /**
     *
     * @param {number} balance
     */
    constructor(balance) {
        this._balance = balance
    }

    /**
     *
     * @param {Config} config
     * @param {ServiceA} serviceA
     */
    static open(config, serviceA) {
        let balance = config.balanceB + serviceA.balance
        return new ServiceB(balance)
    }

    close() {}

    /**
     * @type {number}
     */
    get balance() {
        return this._balance
    }

    increaseBalance() {
        this._balance += 1
    }
}

async function main() {
    let config = new Config(0, 15)
    let container = await Container.open(config, [
        ServiceA, ServiceB
    ])
    let serviceB = container.get('service.b')
    serviceB.increaseBalance()
    console.log(`balance: ${serviceB.balance}`)
    await container.close()
}

main().catch(console.error)
</code></pre></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Tue Feb 08 2022 05:40:03 GMT-0800 (Pacific Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>